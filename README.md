# PyWeather2

## Описание

Скрипт для получения погодных данных с сайта World-weather.ru и отправки на почтовые адреса.
Формируется сводка погодных данных на текущий момент, почасовая сводка на 48 часов вперед и недельная сводка с указанием минимально, максимальной и средней суточной температуры.  
Для настройки городов и списка адресов для отправки используется файл config.yaml

**в версии 1.0 не предусмотрена авторизация на SMTP сервере**

## Установка
1. Склонировать репозиторий в нужный каталог
2. Запустить командную строку в каталоге с файлом ```app.py```
3. Установить виртуальное окружение, текущий каталог должен быть каталогом с файлом ```app.py```:  
    ```batch
    python -m venv venv
    ```
4. Установить зависимости, предварительно активировав виртуальное окружение:
    ```batch
    venv\Scripts\activate.bat
    pip install -r requirements.txt
5. Пропишите необходимые данные в файл config.yaml

## Настройка

Файл config.yaml конфигурация скрипта.

```YAML
- city: moscow
  cityname: Москва
  email:
  - email1@example.com
  - email2@example.com

- city: saint_petersburg
  cityname: Санкт-Петербург
  email:
  - email3@example.com

```

```city``` - идентификатор города, чтобы казать нужный идентификатор, нужно зайти на сайт https://world-weather.ru/,  
выбрать нужный город из списка или через поиск, в url-адресе нужной страницы будет указан идентификатор  
Пример:  https://world-weather.ru/pogoda/russia/**moscow**/ , для г.Москва идентификатор **moscow**

```citiname``` - видимое имя города, выводится в тексте и теме письма

```email``` - список адресов  эл.почты для рассылки результатов

Допускается не ограгиченное количество городов и адресов рассылки.


Параметры для подключения нужно изменить в файле modules/emailcfg.yaml
```YAML
smtp_server: smtp.example.com
smtp_port: 25
smtp_username: username
smtp_password: password
```

## Запуск

скрипт запускается путем активации виртуального окружения и запуска файла ```app.py```

для удобства создан файл ```run.cmd```